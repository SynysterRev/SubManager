<div class="subscription-card" [class]="cardClass()">
    <div class="card-header">
        <div class="app-icon-container">
            <svg class="app-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path
                    d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15.5l-4.5-3.5 4.5-3.5v7zM11 7l4.5 3.5-4.5 3.5V7z" />
            </svg>
        </div>
        <div class="app-name">{{subscription().name}}</div>
        <div class="price-info">
            <div class="price">${{subscription().price}}</div>
            <div class="per-month">/month</div>
        </div>

        <app-dropdown #subscriptionDropdown (itemClick)="onDropdownItemClick($event)" [class.disabled]="!subscription().isActive">
            <svg icon class="dropdown-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24px"
                height="24px">
                <path
                    d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z" />
            </svg>
            <div class="menu-item" (click)="subscriptionDropdown.onMenuItemClick($event, 'Edit')">
                Edit Subscription
            </div>
            <div class="menu-item delete-option" (click)="subscriptionDropdown.onMenuItemClick($event, 'Delete')">
                Delete Subscription
            </div>
        </app-dropdown>
    </div>
    <div class="card-details">
        <span class="tag tag-entertainment">{{subscription().category}}</span>
        @if(subscription().isActive){
        <span class="tag tag-due">Due in {{subscription().daysBeforeNextPayment}} days</span>
        }
        @else {
        <span class="tag tag-paused">Paused</span>
        }
    </div>
    <div class="card-footer">
        <div class="billing-info">
            <svg class="calendar-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"
                width="16px" height="16px">
                <path
                    d="M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11zM5 7V6h14v1H5z" />
            </svg>
            <span>{{subscription().paymentDate | localDate:{ year: 'numeric', month: '2-digit', day: '2-digit' }
                }}</span>
            <span class="annual-cost">${{subscription().yearCost}}/yr</span>
        </div>
        <div class="toggle-switch-container">
            <input type="checkbox" id="toggle-{{subscription().id}}" [checked]="subscription().isActive"
                (change)="toggleActive()">
            <label for="toggle-{{subscription().id}}" class="toggle-switch"></label>
        </div>
    </div>
</div>